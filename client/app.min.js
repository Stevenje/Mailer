var app=angular.module("app",["ui.bootstrap","ui.router"]);app.factory("profiles",function(a){"use strict";return{search:function(b){return a.post("http://localhost:3000/search",{query:b})}}}),app.controller("AppCtrl",function(a,b){"use strict";b.get("http://localhost:3000/profiles").success(function(b){a.people=b,a.filteredPeople=[],a.currentPage=1,a.numPerPage=10,a.maxSize=5,a.numPages=function(){return Math.ceil(a.people.length/a.numPerPage)},a.$watch("currentPage + numPerPage",function(){var b=(a.currentPage-1)*a.numPerPage,c=b+a.numPerPage;a.filteredPeople=a.people.slice(b,c)})}),a.sendEmail=function(a){console.log("in function, data: "+a),b.post("http://localhost:3000/email",a).success(function(a){console.log(a)})}}),app.controller("SearchCtrl",function(a,b,c,d){"use strict";a.filteredPeople=[],a.currentPage=1,a.itemsPerPage=10,a.numPages=function(){return Math.ceil(a.results.results.length/a.itemsPerPage)},b.get("http://localhost:3000/templates").success(function(b){console.log(b),a.templates=b,a.selectedTemplate=a.templates[0]}),a.search=function(){a.loading=!0,d.search(a.queryTerm).success(function(b){a.results=b,a.loading=!1,a.$watch("currentPage + numPerPage",function(){var b=(a.currentPage-1)*a.itemsPerPage,c=b+a.itemsPerPage;a.filteredPeople=a.results.results.slice(b,c)})})},a.sendEmail=function(a){console.log("Emailing: "+a.name),b.post("http://localhost:3000/email",a).success(function(a){console.log(a)})},a.deleteProfile=function(a){console.log("in function, data: "+a),b.delete("http://localhost:3000/profiles/"+a._id).success(function(a){console.log(a)})}}),app.controller("CompCtrl",function(a,b){a.search=function(){b.post("http://localhost:3000/comp",{query:a.queryTerm}).success(function(b){a.results=b})}}),app.controller("TempCtrl",function(a,b){"use strict";a.addTemplate=function(){b.post("http://localhost:3000/templates",{client:a.client,role:a.role,subject:a.subject,html:a.html}).success(function(a){console.log(a)})}}),app.config(function(a,b){"use strict";b.otherwise("/"),a.state("index",{url:"/",templateUrl:"templates/partial-home.html"}).state("profiles",{url:"/profiles",templateUrl:"templates/partial-search.html"}).state("comp",{url:"/comp",templateUrl:"templates/partial-comp.html"}).state("template",{url:"/template",templateUrl:"templates/partial-template.html"})});