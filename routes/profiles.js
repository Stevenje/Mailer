(function(){var o,e,n,r,t,i;t=require("mongodb"),n=t.Server,e=t.Db,o=t.BSONPure,i=new n("localhost",27017,{auto_reconnect:!0}),r=new e("githubdb",i),r.open(function(o,e){return o?void 0:(console.log("Connected to 'githubdb' database"),e.collection("profiles",{strict:!0},function(o,e){return o?console.log("The 'profiles' collection doesn't exist. Hungry for DATA! nom nom..."):void 0}))}),exports.findById=function(e,n){var t;return t=e.params.id,console.log("Retrieving profile: "+t),r.collection("profiles",function(e,r){return r.findOne({_id:new o.ObjectID(t)},function(o,e){return n.send(e)})})},exports.findAll=function(o,e){return r.collection("profiles",function(o,n){return n.find().toArray(function(o,n){return e.send(n)})})},exports.addProfile=function(o,e){var n;return n=o.body,console.log("Adding profile: "+JSON.stringify(n)),r.collection("profiles",function(o,r){return r.insert(n,{safe:!0},function(o,n){return o?e.send({error:"An error has occurred"}):(console.log("Success: "+JSON.stringify(n[0])),e.send(n[0]))})})},exports.updateProfile=function(e,n){var t,i;return t=e.params.id,i=e.body,console.log("Updating profile: "+t),console.log(JSON.stringify(i)),r.collection("profiles",function(e,r){return r.update({_id:new o.ObjectID(t)},wine,{safe:!0},function(o,e){return o?(console.log("Error updating profile: "+o),n.send({error:"An error has occurred"})):(console.log(""+e+" document(s) updated"),n.send(i))})})},exports.deleteProfile=function(e,n){var t;return t=e.params.id,console.log("Deleting profile: "+t),r.collection("profiles",function(r,i){return i.remove({_id:new o.ObjectID(t)},{safe:!0},function(o,r){return o?n.send({error:"An error has occurred - "+o}):(console.log(""+r+" document(s) deleted"),n.send(e.body))})})},exports.sendEmail=function(o,e){var n;return n=o.body,console.log("Emailing profile: "+JSON.stringify(n))}}).call(this);